<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Imputation (mice) · Mice.jl</title><meta name="title" content="Imputation (mice) · Mice.jl"/><meta property="og:title" content="Imputation (mice) · Mice.jl"/><meta property="twitter:title" content="Imputation (mice) · Mice.jl"/><meta name="description" content="Documentation for Mice.jl."/><meta property="og:description" content="Documentation for Mice.jl."/><meta property="twitter:description" content="Documentation for Mice.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Mice.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Getting started</a></li><li class="is-active"><a class="tocitem" href>Imputation (<code>mice</code>)</a><ul class="internal"><li><a class="tocitem" href="#Diagnostics"><span>Diagnostics</span></a></li></ul></li><li><a class="tocitem" href="../analysis/">Analysis (<code>with</code>)</a></li><li><a class="tocitem" href="../pooling/">Pooling coefficients (<code>pool</code>)</a></li><li><a class="tocitem" href="../benchmarks/">Benchmarks</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Imputation (<code>mice</code>)</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Imputation (<code>mice</code>)</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/tom-metherell/Mice.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/tom-metherell/Mice.jl/blob/master/docs/src/imputation.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Imputation-(mice)"><a class="docs-heading-anchor" href="#Imputation-(mice)">Imputation (<code>mice</code>)</a><a id="Imputation-(mice)-1"></a><a class="docs-heading-anchor-permalink" href="#Imputation-(mice)" title="Permalink"></a></h1><p>The main function of the package is <code>mice</code>, which takes a <code>DataFrame</code> as its input. It returns a multiply imputed dataset (<code>Mids</code>) object with the imputed values.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Mice.Mids" href="#Mice.Mids"><code>Mice.Mids</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Mids</code></pre><p>A multiply imputed dataset object.</p><p>The data originally supplied are stored as <code>data</code>.</p><p>The imputed data are stored as <code>imputations</code> (one column per imputation).</p><p>The number of imputations is stored as <code>m</code>.</p><p>The imputation method for each variable is stored as <code>methods</code>.</p><p>The predictor matrix is stored as <code>predictorMatrix</code>.</p><p>The order in which the variables are imputed is stored as <code>visitSequence</code>.</p><p>The number of iterations is stored as <code>iter</code>.</p><p>The mean of each variable across the imputations is stored as <code>meanTraces</code>.</p><p>The variance of each variable across the imputations is stored as <code>varTraces</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tom-metherell/Mice.jl/blob/d317c24cacc95ca8faaf92fe0634841676b685e1/src/Mice.jl#L17-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Mice.mice" href="#Mice.mice"><code>Mice.mice</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">mice(
    data::DataFrame;
    m::Int = 5,
    visitSequence::Union{Vector{String}, Nothing} = nothing,
    methods::Union{NamedVector{String}, Nothing} = nothing,
    predictorMatrix::Union{NamedMatrix{Bool}, Nothing} = nothing,
    iter::Int = 10,
    progressReports::Bool = true,
    gcSchedule::Float64 = 1.0,
    threads::Bool = true,
    kwargs...
    )</code></pre><p>Imputes missing values in a dataset using the MICE algorithm.  Heavily based on the R package <code>mice</code> (van Buuren &amp; Groothuis-Oudshoorn, 2011).</p><p>The data containing missing values (<code>data</code>) must be supplied as a <code>DataFrame</code>.</p><p>The number of imputations created is specified by <code>m</code>.</p><p>The variables will be imputed in the order specified by <code>visitSequence</code>.  The default is sorted by proportion of missing data in ascending order;  the order can be customised using a vector of variable names in the desired order.</p><p>The imputation method for each variable is specified by the <code>NamedArray</code> <code>methods</code>.  The default is to use predictive mean matching (<code>pmm</code>) for all variables.  Currently only <code>pmm</code> is supported.  Any variable not to be imputed can be marked as such using an empty string (&quot;&quot;).</p><p>The predictor matrix is specified by the <code>NamedArray</code> <code>predictorMatrix</code>.  The default is to use all other variables as predictors for each variable.  Any variable not predicting another variable can be marked as such in the matrix using a 0.</p><p>The number of iterations is specified by <code>iter</code>.</p><p>If <code>progressReports</code> is <code>true</code>, a progress indicator will be displayed in the console.</p><p><code>gcSchedule</code> dictates when the garbage collector will be (additionally) invoked. The  number provided is the fraction of your RAM remaining at which the GC will be called. For small datasets, you may get away with a value of <code>0.0</code> (never called), but for larger datasets, it may be worthwhile to call it more frequently. The default is to call it  after each iteration of each variable (<code>1.0</code>), but this may negatively affect performance if it is not necessary for your dataset.</p><p><code>threads</code> dictates whether multi-threading will be used. This will improve performance for larger jobs if and only if Julia has been launched with multiple threads (which you can verify by calling <code>Threads.nthreads()</code>). The default is <code>true</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tom-metherell/Mice.jl/blob/d317c24cacc95ca8faaf92fe0634841676b685e1/src/Mice.jl#L57-L106">source</a></section><section><div><pre><code class="language-julia hljs">mice(
    mids::Mids;
    iter::Int = 10,
    progressReports::Bool = true,
    gcSchedule::Float64 = 1.0,
    threads::Bool = true,
    kwargs...
    )</code></pre><p>Adds additional iterations to an existing <code>Mids</code> object.</p><p>The number of <em>additional</em> iterations is specified by <code>iter</code>.</p><p>If <code>progressReports</code> is <code>true</code>, a progress indicator will be displayed in the console.</p><p><code>gcSchedule</code> dictates when the garbage collector will be (additionally) invoked. The  number provided is the fraction of your RAM remaining at which the GC will be called. For small datasets, you may get away with a value of <code>0.0</code> (never called), but for larger datasets, it may be worthwhile to call it more frequently. The default is to call it  after each iteration of each variable (<code>1.0</code>), but this may negatively affect performance if it is not necessary for your dataset.</p><p><code>threads</code> dictates whether multi-threading will be used. This will improve performance for larger jobs if and only if Julia has been launched with multiple threads (which you can verify by calling <code>Threads.nthreads()</code>). The default is <code>true</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tom-metherell/Mice.jl/blob/d317c24cacc95ca8faaf92fe0634841676b685e1/src/Mice.jl#L187-L213">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Mice.makeMonotoneSequence" href="#Mice.makeMonotoneSequence"><code>Mice.makeMonotoneSequence</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">makeMonotoneSequence(data::DataFrame)</code></pre><p>Returns a vector of the column names in a DataFrame in ascending order of missingness. This facilitates convergence in cases where missingness follows a &quot;monotone&quot; pattern. It is the default visit sequence for the <code>mice()</code> function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tom-metherell/Mice.jl/blob/d317c24cacc95ca8faaf92fe0634841676b685e1/src/micehelperfunctions.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Mice.makePredictorMatrix" href="#Mice.makePredictorMatrix"><code>Mice.makePredictorMatrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">makePredictorMatrix(data::DataFrame)</code></pre><p>Returns a named matrix of booleans defining the predictors for each variable in <code>data</code>. The variables to be predicted are on the rows, and the predictors are on the columns. The default is to use all variables as predictors for all other variables (i.e. all 1s except for the diagonal, which is 0).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tom-metherell/Mice.jl/blob/d317c24cacc95ca8faaf92fe0634841676b685e1/src/micehelperfunctions.jl#L43-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Mice.makeMethods" href="#Mice.makeMethods"><code>Mice.makeMethods</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">makeMethods(data::DataFrame)</code></pre><p>Returns a named vector of strings defining the method by which each variable in <code>data</code> should be imputed in the <code>mice()</code> function. The default (and only supported) method is predictive mean matching (pmm).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tom-metherell/Mice.jl/blob/d317c24cacc95ca8faaf92fe0634841676b685e1/src/micehelperfunctions.jl#L26-L32">source</a></section></article><h2 id="Diagnostics"><a class="docs-heading-anchor" href="#Diagnostics">Diagnostics</a><a id="Diagnostics-1"></a><a class="docs-heading-anchor-permalink" href="#Diagnostics" title="Permalink"></a></h2><p>After performing multiple imputation, you should inspect the trace plots of the imputed variables to verify convergence. <code>Mice.jl</code> includes the a plotting function to do this.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RecipesBase.plot" href="#RecipesBase.plot"><code>RecipesBase.plot</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plot(
    mids::Mids,
    var::String
    )</code></pre><p>Plots the mean and standard deviation of the imputed values for a given variable. Here <code>var</code> is given as a string (the name of the variable).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tom-metherell/Mice.jl/blob/d317c24cacc95ca8faaf92fe0634841676b685e1/src/Mice.jl#L284-L292">source</a></section><section><div><pre><code class="language-julia hljs">plot(
    mids::Mids,
    var_no::Int
    )</code></pre><p>Plots the mean and standard deviation of the imputed values for a given variable. Here <code>var_no</code> is given as an integer (the index of the variable in the <code>visitSequence</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tom-metherell/Mice.jl/blob/d317c24cacc95ca8faaf92fe0634841676b685e1/src/Mice.jl#L309-L317">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Getting started</a><a class="docs-footer-nextpage" href="../analysis/">Analysis (<code>with</code>) »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.2 on <span class="colophon-date" title="Wednesday 8 November 2023 12:30">Wednesday 8 November 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
